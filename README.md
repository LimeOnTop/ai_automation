# AI Browser Automation Agent

Автономный AI-агент для управления веб-браузером и выполнения сложных многошаговых задач.

## Возможности

- **Автономная работа** - агент самостоятельно принимает решения и выполняет задачи
- **Управление браузером** - полный контроль над браузером через Selenium
- **Security Layer** - запрашивает подтверждение перед деструктивными действиями
- **AI-принятие решений** - использует OpenAI GPT-4o для анализа страниц и принятия решений
- **Управление контекстом** - эффективное извлечение и обработка информации со страниц
- **Обработка ошибок** - агент адаптируется при неудачных действиях

## Требования

- Go 1.24 или выше
- **Google Chrome или Chromium браузер** (должен быть установлен)
- ChromeDriver (должен быть установлен и доступен в PATH, или укажите путь через переменную `BROWSER_DRIVER_PATH`)
- OpenAI API ключ

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd ai_automation
```

2. Установите зависимости:
```bash
go mod download
```

3. Установите Google Chrome (если еще не установлен):
```bash
# macOS:
brew install --cask google-chrome
```

4. Установите ChromeDriver:
```bash
# macOS
brew install chromedriver

# После установки убедитесь, что chromedriver доступен:
which chromedriver

# Опционально можно указать пути:
export BROWSER_DRIVER_PATH=/path/to/chromedriver
export CHROME_BINARY_PATH=/path/to/chrome
```

5. Создайте файл `.env`:
```bash
cp .env.example .env
```

6. Добавьте ваш OpenAI API ключ в `.env`:
```
OPENAI_API_KEY=correct_api_key
OPENAI_MODEL=gpt-4o
```

## Использование

### Быстрый старт

1. Убедитесь, что ChromeDriver установлен и доступен:
```bash
which chromedriver
```

2. Запустите агента:
```bash
go run main.go
```

Или соберите и запустите:
```bash
make build
./agent
```

3. В терминале введите задачу для агента, например:
```
Найди 3 подходящие вакансии AI-инженера на hh.ru и откликнись на них с сопроводительным, предварительно изучив резюме в моём профиле
```

Агент начнет выполнять задачу, и вы сможете наблюдать за его действиями в открытом браузере.

**Важно:** 
- Перед выполнением задач, требующих авторизации (hh.ru, почта, доставка еды), войдите в свой аккаунт в браузере вручную. Агент продолжит работу с вашей сессией.
- Сессии браузера сохраняются автоматически в `~/.ai_automation/chrome_profile/`. Это означает, что после закрытия программы и повторного запуска вы останетесь авторизованными в тех же аккаунтах.
- Агент не будет завершать задачу, пока не выполнит хотя бы одно действие (навигацию, клик или ввод текста) и не убедится, что задача действительно выполнена.

## Примеры задач

### Поиск и отклик на вакансии
```
Найди 3 подходящие вакансии AI-инженера на hh.ru и откликнись на них
```

### Заказ еды
```
Закажи мне BBQ-бургер и картошку фри из того места, откуда я заказывал на прошлой неделе
```

### Управление почтой
```
Прочитай последние 10 писем в яндекс почте и удали спам
```

## Архитектура

Проект следует принципам Clean Architecture:

```
ai_automation/
├── domain/              # Бизнес-логика и интерфейсы
│   ├── entities/        # Доменные сущности
│   └── interfaces/      # Интерфейсы для зависимостей
├── infrastructure/      # Реализация внешних зависимостей
│   ├── browser/         # Selenium контроллер
│   ├── ai/              # OpenAI клиент
│   └── security/        # Security layer
├── application/         # Прикладная логика
│   └── agent/           # Основной агент
└── presentation/        # Презентационный слой
    └── terminal/         # CLI интерфейс
```

## Особенности реализации

### Управление контекстом
Агент не отправляет целые HTML-страницы в AI. Вместо этого:
- Извлекаются только релевантные элементы (кнопки, формы, ссылки)
- Ограничивается количество элементов (до 20-50)
- Используется структурированное представление страницы

### Security Layer
Агент автоматически определяет деструктивные действия и запрашивает подтверждение:
- Оплата/покупка
- Удаление данных
- Отправка форм с критической информацией

### Обработка ошибок
При неудачных действиях агент:
- Продолжает работу (не останавливается)
- Адаптирует стратегию на основе ошибок
- Имеет ограничение на количество итераций (50)

### Автономность
Агент полностью автономен:
- Сам определяет селекторы элементов
- Сам решает, какие действия предпринять
- Не использует заготовки или предопределенные шаги

## Разработка

### Структура проекта

- **domain/entities** - основные сущности (Action, Task, PageInfo)
- **domain/interfaces** - интерфейсы для зависимостей
- **infrastructure/browser** - реализация управления браузером через Selenium
- **infrastructure/ai** - интеграция с OpenAI API
- **infrastructure/security** - проверка безопасности действий
- **application/agent** - основная логика агента
- **presentation/terminal** - CLI интерфейс

## Ограничения

- Максимум 50 итераций на задачу (защита от бесконечных циклов)
- Ограничение на количество извлекаемых элементов (для управления контекстом)
- Требуется ручной вход в аккаунты перед выполнением задач
- Security layer останавливает выполнение для критических действий


